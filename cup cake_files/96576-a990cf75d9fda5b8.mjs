(self.modernJsonp=self.modernJsonp||[]).push([["96576"],{127078:function(e,a,n){n.d(a,{EJ:()=>p,EX:()=>c,Ig:()=>f,Jy:()=>g,YS:()=>k,ZP:()=>w,a3:()=>_,al:()=>S,dk:()=>y,hO:()=>m,kH:()=>b,nN:()=>h,z6:()=>v});var r=n(667294),t=n(581722),i=n(994507),o=n(784548),l=n(79271);let u=Date.now(),s=()=>(0,l.OC)(),d=()=>Date.now()-u,c=()=>(0,t.v9)(e=>e.currentUserTracker?.storageAccessAllowed??i.iN),p=()=>(0,t.v9)(e=>e.currentUserTracker?.visitedUnauthPages??i.PW),g=()=>(0,t.v9)(e=>e.currentUserTracker?.closeupPins??i.tf),_=()=>(0,t.v9)(e=>e.currentUserTracker?.completedSearches??i.fE),b=()=>(0,t.v9)(e=>e.currentUserTracker?.clickthroughPins??i.iK),m=()=>(0,t.v9)(e=>e.currentUserTracker?.savedPins??i.pn),v=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.$y)(a))},[e])},k=()=>{let e=(0,t.I0)();return(0,r.useCallback)((a,n)=>{e((0,o.bj)(a,n))},[e])},h=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.x1)(a))},[e])},f=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.tb)(a))},[e])},y=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.am)(a))},[e])},S=()=>{let e=(0,t.I0)();return(0,r.useCallback)(()=>{e((0,o.AU)())},[e])},w=()=>{let e=(0,t.v9)(e=>e.currentUserTracker?.isAuthenticated??i.MK),a=(0,t.v9)(e=>e.currentUserTracker?.country??i.UF),n=(0,t.v9)(e=>e.currentUserTracker?.region??i.fu),l=c(),u=p(),w=g(),x=_(),E=b(),U=(0,t.v9)(e=>e.currentUserTracker?.downloadedPinsCount??i.cH),P=m(),M=(0,t.v9)(e=>e.currentUserTracker?.isQUS??i.R8),C=(0,t.v9)(e=>e.currentUserTracker?.revisitationState??(0,i.dm)()),L=(0,t.v9)(e=>e.currentUserTracker?.daysSinceLastRevisitation??i.ne),G=k(),A=h(),T=f(),D=y(),I=S();return{isAuthenticated:e,isStorageAllowed:l,isQUS:M,closeupPins:w,visitedPages:u,setVisitedPage:G,completedSearches:x,setCompletedSearch:A,removeCompletedSearch:T,clickthroughPins:E,setClickthroughPin:D,downloadCount:U,updateDownloadCount:I,savedPins:P,setSavedPins:(()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.pv)(a))},[e])})(),revisitationState:C,daysSinceLastRevisitation:L,updateRevisitation:(()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.VD)(a))},[e])})(),initCurrentUserTracker:v(),getPinImpressionCount:s,getSessionDuration:d,country:a,region:n}}},839603:function(e,a,n){n.d(a,{Et:()=>t,G0:()=>l,HG:()=>g,I_:()=>r,Ki:()=>s,ON:()=>k,PB:()=>p,Sz:()=>d,XF:()=>i,Xq:()=>c,ZG:()=>u,_r:()=>m,s5:()=>o,tO:()=>b,xP:()=>v,zk:()=>_});let r="var(--comp-button-color-background-primary-default)",t="var(--comp-button-color-background-secondary-default)",i="var(--comp-button-color-background-tertiary-semi-transparent-default)",o="var(--comp-button-color-hover-background-primary-default)",l="var(--comp-button-color-hover-background-secondary-default)",u="var(--comp-button-color-hover-background-tertiary-default)",s="var(--comp-button-color-hover-background-shopping-default)",d="var(--comp-button-color-hover-background-light-default)",c="var(--comp-button-color-hover-background-tertiary-semi-transparent-default)",p="var(--comp-button-color-hover-background-transparent-default)",g="var(--comp-progressbar-color-background-bar-unfilled)",_="var(--comp-progressbar-color-background-bar-default)",b="var(--comp-progressbar-color-background-bar-success)",m="var(--comp-progressbar-color-background-bar-warning)",v="var(--comp-progressbar-color-background-bar-error)",k="var(--comp-bannerslim-color-background-recommendation-expanded)"},20717:function(e,a,n){n.d(a,{$p:()=>x,_l:()=>E,cO:()=>w,t2:()=>U,w2:()=>P,xM:()=>S});var r=n(686659),t=n(667294),i=n(312048),o=n(935059),l=n(173874),u=n(501010),s=n(774838),d=n(661376),c=n(575820),p=n(739405),g=n(785893);let _="UnauthDesktopSocialPinLandingPageContext",b="UnauthMobileSocialPinLandingPageContext",m="AthDesktopSocialPinLandingPageContext",v="AuthMobileSocialPinLandingPageContext",k=(0,t.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},hasDismissedGradientUpsell:!1,setHasDismissedGradientUpsell:()=>{},isGradientUpsellTriggerInView:!1,setIsGradientUpsellTriggerInView:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),h=({children:e})=>{let[a,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[u,s]=(0,t.useState)(!1),[d,c]=(0,t.useState)(!1),[p,_]=(0,t.useState)(""),b=(0,t.useMemo)(()=>({hasSeenAuthMobileLandingToast:a,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:r,setHasSeenAuthDesktopLandingToast:i,hasDismissedGradientUpsell:o,setHasDismissedGradientUpsell:l,hasDismissedLoginModal:u,setHasDismissedLoginModal:s,isGradientUpsellTriggerInView:d,setIsGradientUpsellTriggerInView:c,pinImageUrl:p,setPinImageUrl:_}),[a,r,o,l,u,s,d,c,p,_]);return(0,g.jsx)(k,{value:b,children:e})},f=(0,t.createContext)({key:"",data:null}),y=({children:e})=>{let a=(0,i.TH)(),{isSocialBot:n,isBot:r}=(0,s.B)(),h=(0,o.Z)(),y=h&&h.isAuth,S=(0,p.HG)(),w=(0,t.useMemo)(()=>(0,l.fY)(a)&&(0,c.mB)(a.search).invite_code||"",[a]),x=(0,t.useMemo)(()=>{if(!((0,l.gf)(a)||(0,l.Xn)(a)))return"";let e=(0,c.mB)(a.search);if(e.invite_code)return e.invite_code;let n=e.from;if(!n)return"";let r=(0,c.Jx)(n).split("?")[1]||"";return r&&(0,c.mB)(r).invite_code||""},[a]),E=(0,t.useMemo)(()=>{let e=(0,i.LX)({path:"/pin/:id"},a.pathname);return String(e&&"id"in e.params&&e.params.id)||""},[a.pathname]),[U,P]=(0,t.useState)({key:"",data:null}),[M,C]=(0,t.useState)(!1),L=!y&&S,G=!y&&!S,{checkExperiment:A}=(0,u.Z)(),{hasDismissedLoginModal:T}=(0,t.useContext)(k),D=!r&&!n&&G&&w,{inDwebFullPageModalExp:I,dWebFullPageModalExpGroup:R,inDwebSocialModalUpdateExp:H,dWebSocialModalUpdateExpGroup:N,inDwebUnauthRelatedPinsLimitExp:F,unauthDwebRelatedPinsLimitGroup:Z,inDwebUnauthSocialPinLandingExp:j,unauthDwebSocialPinLandingGroup:B,inMwebUnauthRelatedPinsLimitExp:J,unauthMwebRelatedPinsLimitGroup:O,inMwebUnauthSocialPinLandingSecondaryUpsellExp:X,unauthMwebSocialPinLandingSecondaryUpsellGroup:z,inMwebSocialFeatureEducationExp:K,mwebSocialFeatureEducationExpGroup:V,inMwebLoginSignupPageExp:W,unauthMwebLoginSignupPageExpGroup:Y}=(0,t.useMemo)(()=>{let e=!r&&!n&&L&&w&&(()=>{let e=A("ce_dweb_unauth_splp_blocking",{dangerouslySkipActivation:!0}),a=A("ce_dweb_unauth_splp_blocking_12s",{dangerouslySkipActivation:!0});return e.anyEnabled?e:a})()||{anyEnabled:!1,group:void 0},a=!r&&!n&&L&&w&&A("ce_dweb_unauth_splp_modal_update",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},t=!r&&!n&&L&&w&&A("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},i=!r&&!n&&L&&w&&A("ce_dweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},o=!r&&!n&&G&&w&&A("ce_mweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},l=D&&T&&A("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0},u=!r&&!n&&G&&(x||w)&&A("ce_mweb_unauth_social_feature_education")||{anyEnabled:!1,group:void 0},s=!r&&!n&&G&&(x&&A("ce_mweb_unauth_splp_signup_banner")||w&&A("ce_mweb_unauth_splp_signup_banner",{dangerouslySkipActivation:!0}))||{anyEnabled:!1,group:void 0};return{inDwebFullPageModalExp:e.anyEnabled,dWebFullPageModalExpGroup:e.group,inDwebSocialModalUpdateExp:a.anyEnabled,dWebSocialModalUpdateExpGroup:a.group,inDwebUnauthRelatedPinsLimitExp:i.anyEnabled,unauthDwebRelatedPinsLimitGroup:i.group,inDwebUnauthSocialPinLandingExp:t.anyEnabled,unauthDwebSocialPinLandingGroup:t.group,inMwebUnauthRelatedPinsLimitExp:o.anyEnabled,unauthMwebRelatedPinsLimitGroup:o.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:l.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:l.group,inMwebSocialFeatureEducationExp:u.anyEnabled,mwebSocialFeatureEducationExpGroup:u.group,inMwebLoginSignupPageExp:s.anyEnabled,unauthMwebLoginSignupPageExpGroup:s.group,showMwebDefaultModalUpsellOnLand:D}},[r,n,L,G,w,x,A,T,D]),$=w||x,q="default";"enabled_popover_profile"===B?q="default_with_sender_recent_pins":K&&(q="default_with_social_feature_education");let Q=(0,d.Z)($?{name:"InviteCodeMetadataResource",options:{invite_code:$,field_set_key:q}}:null),ee=Q.isLoaded?Q.data:null;(0,t.useEffect)(()=>{if(ee){let e=ee.sender??null,a=y&&e.id!==h.id&&e?.should_show_messaging&&h.should_show_messaging;if(L&&e){let a=null,n=null;j||N||F?(a={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:B,inviterRecentPins:"enabled_popover_profile"===B&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===B&&e.username||""},N&&(a.socialModalUpdateExpGroup=N),F&&(a.limitedRelatedPinsExpGroup=Z)):I?n={inDwebFullPageModalExp:I,isFullPageModalDismissed:M,setIsFullPageModalDismissed:C}:a=[5,9,12,16].includes(ee.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},P({key:_,data:{inviter:e,popoverData:a,modalData:n}})}else if(G&&e){let a=D||O;if(a||W||K){let n={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,showDefaultUpsell:!!a};X&&(n.secondaryExpGroup=z),O&&(n.limitedRelatedPinsExpGroup=O),K&&!e.is_private_profile&&(n.socialFeatureEducationExpGroup=V),W&&(n.loginSignupPageExpGroup=Y),P({key:b,data:{upsellData:n}})}}else a&&!S?P({key:v,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:h.id||""},pin:{pinId:E}}}}):a&&S&&P({key:m,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:h.id||""},pin:{pinId:E}}}})}else P({key:"",data:null})},[ee,y,S,E,h,I,R,H,N,F,Z,j,G,B,L,J,O,X,z,K,V,W,Y,M,D]);let ea=(0,t.useMemo)(()=>U,[U]);return(0,g.jsx)(f,{value:ea,children:e})},S=({children:e})=>((0,t.useEffect)(()=>{(0,r.Z)("SocialPinLandingPageContext","/app/www/lib/SocialPinLandingPageContext.tsx")},[]),(0,g.jsx)(h,{children:(0,g.jsx)(y,{children:e})})),w=()=>{let e=(0,t.useContext)(f);return e.key===_?e:null},x=()=>{let e=(0,t.useContext)(f);return e.key===b?e:null},E=()=>{let e=(0,t.useContext)(f);return e.key===v?e:null},U=()=>{let e=(0,t.useContext)(f);return e.key===m?e:null},P=()=>(0,t.useContext)(k)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/96576-a990cf75d9fda5b8.mjs.map