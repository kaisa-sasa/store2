(self.modernJsonp=self.modernJsonp||[]).push([["93059"],{177303:function(e,t,a){var n,i;a.r(t),a.d(t,{default:()=>o});let l={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"userDidItData"}],kind:"Fragment",metadata:null,name:"CommentThreadContainerLikeMutation",selections:i=[{alias:null,args:[{fields:[{kind:"Variable",name:"userDidItData",variableName:"userDidItData"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3LikeUserDidItDataMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"CommentThreadContainerLikeMutation",selections:i},params:{id:"0e45555e33d7c8c17de577cb4e5213ff3568b1b3f3e6694041407c0dad67674d",metadata:{},name:"CommentThreadContainerLikeMutation",operationKind:"mutation",text:null}};l.hash="6abad0b1546231dd9301ca5510fb88f5";let o=l},483416:function(e,t,a){var n,i;a.r(t),a.d(t,{default:()=>o});let l={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"userDidItData"}],kind:"Fragment",metadata:null,name:"CommentThreadContainerUnLikeMutation",selections:i=[{alias:null,args:[{fields:[{kind:"Variable",name:"userDidItData",variableName:"userDidItData"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3UnlikeUserDidItDataMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"CommentThreadContainerUnLikeMutation",selections:i},params:{id:"8f06f078d5b50aa7a3b5e86afda41af9f9ff89d14d2620f3f830abe11ce26f6e",metadata:{},name:"CommentThreadContainerUnLikeMutation",operationKind:"mutation",text:null}};l.hash="e8e5a11ac4f4d2e8c4a2ed9c7ee3c073";let o=l},966597:function(e,t,a){var n,i;a.r(t),a.d(t,{default:()=>o});let l=(i=[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},n,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="38e173ab2c3107ebc5b3da9f216fac98";let o=l},488966:function(e,t,a){var n,i,l,o;a.r(t),a.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DescriptionWithLinksAndMentions_pin",selections:[{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"descriptionLinks",plural:!0,selections:[n={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"objectId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:[n,i,l,o],storageKey:null},{args:null,kind:"FragmentSpread",name:"useHyperlinkExperiment_pin"}],type:"Pin",abstractKey:null};r.hash="93be5ba2b479913d0e23e4971f11a9cd";let s=r},100554:function(e,t,a){var n,i,l,o,r;a.r(t),a.d(t,{default:()=>d});let s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualContext_pin",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:o=[{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:o,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[l,n,i],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"236x")'},{alias:"imageSpec_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"1200x")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVideo",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetMainPinImage_pin"}],type:"Pin",abstractKey:null};s.hash="f5ddfd6a30ebe10b0f0a7b0bf12bea4e";let d=s},562802:function(e,t,a){var n;a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetMainPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"236x")'},{alias:"imageSpec_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"1200x")'}],type:"Pin",abstractKey:null};i.hash="64a50a10a8f854ca82309453d98f41a7";let l=i},219077:function(e,t,a){a.d(t,{Z:()=>l});var n=a(667294);let i="undefined"!=typeof document?document:{},l=()=>{let e=(0,n.useRef)(void 0),t=i.documentElement,{body:a}=i;return t?[()=>{if(!a||!a.style||e.current)return;let n=window.innerWidth-t.clientWidth,i=parseInt(window.getComputedStyle(a).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",a.style.position="relative",a.style.overflow="hidden",a.style.paddingRight=`${i+n}px`,e.current=!0},()=>{a&&a.style&&e.current&&(t.style.position="",t.style.overflow="",a.style.position="",a.style.overflow="",a.style.paddingRight="",e.current=!1)}]:[]}},331128:function(e,t,a){a.d(t,{Z:()=>u});var n=a(581722),i=a(27399),l=a(264267),o=a(107889),r=a(426130),s=a(779686),d=a(578321),c=a(438274);let m={[o.o.aggregatedComment]:"AggregatedCommentReplyResource",[o.o.pin]:"AggregatedCommentResource",[o.o.didIt]:"DidItCommentsResource"};function u(){let e=(0,n.I0)(),{aggregatedCommentCreated:t,updateCommentCount:a}=(0,l.nf)();return async({commentMedia:n,force:l=!0,fromUnifiedComment:o,objectId:u,objectType:g,orbacSubjectId:p,pinId:_,replyToCommentId:h,tags:y,text:f})=>{let v=m[g],x={force:l,objectId:u,pinId:_,tags:y,text:f,replyToCommentId:h,...p?{orbacSubjectId:p}:{},...n?{commentMedia:n}:{}},T=c.Z.AGGREGATED_COMMENTS;o&&(T="pin"===g?c.Z.UNIFIED_COMMENTS:c.Z.AGGREGATED_COMMENT_REPLIES);let E=await i.Z.create(v,x).callCreate({showError:!1}),b=E.resource_response.data;return t(u,b),e((0,s.vX)({feedType:T,feedId:u,itemIds:[b.id],itemType:b.type,prepend:!0})),"aggregatedComment"===g?a(u,1):"didIt"===g&&e((0,r.L8)(u,1)),_&&e((0,d.R)(_,1)),b.id||E}}},291211:function(e,t,a){a.d(t,{Z:()=>r});var n=a(667294),i=a(514223),l=a(767415);class o extends n.PureComponent{constructor(...e){var t,a,n;super(...e),t="handleKeyDown",a=e=>{let{onClose:t,goToNext:a,goToPrevious:n}=this.props,o=e.keyCode||e.code;!e.ctrlKey&&!e.metaKey&&(["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(o===i.Z.LEFT?(e.preventDefault(),e.stopPropagation(),n&&n(),(0,l.nP)("web_keydown_left")):o===i.Z.RIGHT?(e.preventDefault(),e.stopPropagation(),a&&a(),(0,l.nP)("web_keydown_right")):o===i.Z.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t())))},(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let r=o},752031:function(e,t,a){a.d(t,{A:()=>p,G:()=>m});var n,i=a(667294);a(167912);var l=a(213491),o=a(183e3),r=a(566431),s=a(296339),d=a(785893);let{Provider:c,get:m}=(0,l.Z)("VisualContext"),u=(void 0!==n||(n=a(100554)).hash&&"f5ddfd6a30ebe10b0f0a7b0bf12bea4e"!==n.hash&&console.error("The definition of 'VisualContext_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),g=({children:e,pinKey:t,overrideValue:a={}})=>{let n=(0,o.Z)(u,t),{videos:l,embed:m,link:g,isVideo:p}=n??{},_=(0,i.useMemo)(()=>l?.videoList?.v720P?.url?{duration:l.videoList.v720P.duration||void 0,height:l.videoList.v720P.height||void 0,thumbnail:l.videoList.v720P.thumbnail||void 0,url:l.videoList.v720P.url||void 0,width:l.videoList.v720P.width||void 0,captions_urls:l.videoList.v720P.captionsUrls||void 0}:void 0,[l?.videoList?.v720P?.duration,l?.videoList?.v720P?.height,l?.videoList?.v720P?.thumbnail,l?.videoList?.v720P?.url,l?.videoList?.v720P?.width,l?.videoList?.v720P?.captionsUrls]),h=(0,i.useMemo)(()=>l?.videoList?.vHLSV4?.url?{duration:l.videoList.vHLSV4.duration||void 0,height:l.videoList.vHLSV4.height||void 0,thumbnail:l.videoList.vHLSV4.thumbnail||void 0,url:l.videoList.vHLSV4.url||void 0,width:l.videoList.vHLSV4.width||void 0}:void 0,[l?.videoList?.vHLSV4?.duration,l?.videoList?.vHLSV4?.height,l?.videoList?.vHLSV4?.thumbnail,l?.videoList?.vHLSV4?.url,l?.videoList?.vHLSV4?.width]),y=(0,i.useMemo)(()=>l?.videoList?.vHLSV3MOBILE?.url?{duration:l.videoList.vHLSV3MOBILE.duration||void 0,height:l.videoList.vHLSV3MOBILE.height||void 0,thumbnail:l.videoList.vHLSV3MOBILE.thumbnail||void 0,url:l.videoList.vHLSV3MOBILE.url||void 0,width:l.videoList.vHLSV3MOBILE.width||void 0}:void 0,[l?.videoList?.vHLSV3MOBILE?.duration,l?.videoList?.vHLSV3MOBILE?.height,l?.videoList?.vHLSV3MOBILE?.thumbnail,l?.videoList?.vHLSV3MOBILE?.url,l?.videoList?.vHLSV3MOBILE?.width]),f=(0,i.useMemo)(()=>{let e=_||h||y;return l?.entityId&&e?{id:l.entityId,hasVideo:e,mp4:_||void 0,hls:h||void 0,hlsv3:y||void 0}:null},[h,y,_,l?.entityId]),v=(0,r.sY)(m?.type),x=(0,r.oU)({isVideo:p,link:g}),{mainPinImage:T,srcSet:E,srcSizes:b}=(0,s.Z)({pinKey:n}),C=n?.imageSpec_1200x||n?.imageSpec_orig||n?.imageSpec_736x||n?.imageSpec_564x||n?.imageSpec_474x||n?.imageSpec_236x,I=(0,i.useMemo)(()=>({height:C?.height??1,url:C?.url??"",width:C?.width??1}),[C]),L=n?.imageSpec_236x,k=(0,i.useMemo)(()=>L?.url?{height:L.height??1,url:L.url,width:L.width??1}:null,[L]),A=(0,i.useMemo)(()=>{let e=m?.subtype==="pinstory",t=a.mainImage||T,n=a?.carouselInfo?.carouselData?.index??0,i=a?.carouselInfo?.carouselData?.carousel_slots,l=(null!=n&&i&&i[n]?.link||null)??g??"";return{...a,mainImage:t,previewImage:void 0===a.previewImage?k:a.previewImage,mediaViewerImage:I,video:f,embed:m,isYoutubePin:x,isEmbeddedVideo:!!m?.src&&!v&&!e,isGif:v,imgSrc:v&&m?.src?m.src:t.url,...v?{}:{srcSet:E},srcSizes:b,finalLink:l}},[T,k,I,f,m,x,v,E,b,a,g]);return(0,d.jsx)(c,{value:A,children:e})},p=({children:e,pinKey:t,overrideValue:a={}})=>(0,d.jsx)(g,{overrideValue:a,pinKey:t,children:e})},677650:function(e,t,a){a.d(t,{Z:()=>o});var n=a(740097),i=a(785893);let l=/^(?!.*#.*#)#[\p{L}\p{N}_]\S*$/gu;function o({closeupWithinMasonryEnabled:e=!1,peekCloseupEnabled:t=!1,mWebCloseupRedesignEnabled:a=!1,text:o}){let r=t||a?"200":"300";return o.split(new RegExp(/(#\S*)/)).map((t,a)=>{let o=`${a}-${t}`;return t.match(l)?(0,i.jsx)(n.xe,{color:"link",inline:!0,size:r,children:(0,i.jsx)(n.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},o):(0,i.jsx)(n.xe,{color:e?"subtle":void 0,inline:!0,size:r,children:t},o)})}},282636:function(e,t,a){a.d(t,{Z:()=>f});var n,i=a(686659),l=a(667294);a(244311);var o=a(740097),r=a(238896),s=a(677650),d=a(230201),c=a(183e3),m=a(721703),u=a(113759),g=a(785893);let p=(void 0!==n||(n=a(488966)).hash&&"93be5ba2b479913d0e23e4971f11a9cd"!==n.hash&&console.error("The definition of 'DescriptionWithLinksAndMentions_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),_=e=>null!=e&&e>-1,h=({color:e,mention:t,tagObjectId:a,tagType:n,textSize:i})=>{let{logContextEvent:l}=(0,d.u)();return(0,g.jsx)(o.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),l({event_type:101,element:11915,aux_data:{tag_id:a,tag_type:n}})},underline:"none",children:(0,g.jsx)(o.xv,{color:e,inline:!0,overflow:"normal",size:i,weight:"bold",children:t},t)},a)},y=({color:e,link:t,tagObjectId:a,tagType:n,text:i,textSize:l})=>{let{logContextEvent:r}=(0,d.u)(),s=(0,m.Z)({site:"www"}),c=t.startsWith("pinterest://")?t.replace("pinterest://",`${s}/`):t;return(0,g.jsx)(o.xv,{color:e,inline:!0,overflow:"normal",size:l,children:(0,g.jsx)(o.rU,{display:"inlineBlock",href:c,onClick:({event:e})=>{e.stopPropagation(),r({event_type:101,element:18123,aux_data:{tag_id:a,tag_type:n,url:t}})},underline:"hover",children:i},a)},i)},f=({description:e,mentionLinkColor:t,pinKey:a,shouldAdjustOffset:n,shouldMakeHashtagLinksFromText:o,textSize:d,descriptionLinks:m,userMentionTags:f})=>{(0,l.useEffect)(()=>{(0,i.Z)("DescriptionWithLinksAndMentions","/app/common/react/components/do/rich-pins/DescriptionWithLinksAndMentions/DescriptionWithLinksAndMentions.tsx")},[]);let{closeupWithinMasonryEnabled:v,peekCloseupEnabled:x}=(0,u.x4)(),T=(0,c.Z)(p,a),{hyperlinkKeywordsEnabled:E}=(0,r.Z)(T),b=f?.length?f.map(e=>({...T?.userMentionTags?.find(t=>t.offset===e.originalOffset),...e})):T?.userMentionTags??[],C=m?.length?m.map(e=>({...T?.descriptionLinks?.find(t=>t.offset===e.originalOffset),...e})):T?.descriptionLinks??[],I=b.length>0,L=E&&C.length>0;if(!I&&!L)return(0,g.jsx)(l.Fragment,{children:e});let k=0,A=[];return[...b.map(t=>({...t,type:"mention",offset:n?((e,t)=>{let a=t.substr(0,e);return(e??0)-(a.length-a.replace(/\s+/g," ").length)})(t.offset??0,e):t.offset??0})),...E?C.map(e=>({...e,type:"link",offset:e.offset??0})):[]].filter(e=>_(e.offset)&&_(e.length)).sort((e,t)=>(e.offset??0)-(t.offset??0)).forEach(a=>{let n=a?.offset??0,i=a?.length??0,l=e.substr(k,n-k),o=e.substr(n,i);A.push(l),a?.type==="mention"?A.push((0,g.jsx)(h,{color:t,mention:o,tagObjectId:a.objectId,tagType:a.tagType,textSize:d})):a?.type==="link"&&a?.link&&A.push((0,g.jsx)(y,{color:t,link:a.link,tagObjectId:a.objectId,tagType:a.tagType,text:o,textSize:d})),k=n+i}),A.push(e.substr(k)),(o?A.flatMap(e=>"string"!=typeof e?e:(0,s.Z)({closeupWithinMasonryEnabled:v,peekCloseupEnabled:x,text:e})):A).reduce((e,t)=>(0,g.jsxs)(l.Fragment,{children:[e,t]}),null)}},21558:function(e,t,a){a.d(t,{E:()=>s,N:()=>d});var n=a(667294),i=a(786482),l=a(213491),o=a(785893);let{Provider:r,get:s}=(0,l.Z)("Flag"),d=({children:e})=>{let[t,a]=(0,n.useState)(),[l,s]=(0,n.useState)(i.Zw.REPORT),[d,c]=(0,n.useState)(i.qb.STARTED),[m,u]=(0,n.useState)(),[g,p]=(0,n.useState)(),_=(0,n.useMemo)(()=>({flagReason:g,flow:l,status:d,selectedReason:m,modalTitle:t,setFlagReason:p,setFlow:s,setModalTitle:a,setStatus:c,setSelectedReason:u}),[t,l,d,m,g]);return(0,o.jsx)(r,{value:_,children:e})}},786482:function(e,t,a){a.d(t,{Vm:()=>l,Zw:()=>n,qb:()=>i});let n={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},i={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},992998:function(e,t,a){a.d(t,{Z:()=>d});var n=a(686659),i=a(667294),l=a(740097),o=a(319226),r=a(24246),s=a(785893);let d=({isQuestion:e,name:t,size:a,src:d})=>{(0,i.useEffect)(()=>{(0,n.Z)("CommentAvatar","/app/packages/comment/CommentAvatar.tsx")},[]);let c=(0,r.Z)();return(0,s.jsxs)(l.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,s.jsx)(o.qE,{name:t,size:a,src:d}),e&&(0,s.jsxs)(l.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,s.jsx)(l.xu,{position:"absolute",children:(0,s.jsx)(l.JO,{accessibilityLabel:c._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech"})}),(0,s.jsx)(l.xu,{position:"absolute",children:(0,s.jsx)(l.JO,{accessibilityLabel:c._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"question-mark",size:8})})]})]})}},671862:function(e,t,a){a.d(t,{Z:()=>es});var n=a(686659),i=a(667294),l=a(740097),o=a(581722),r=a(209377),s=a(219077),d=a(331128),c=a(21558),m=a(992998),u=a(458465),g=a(333651),p=a(773655),_=a(319226),h=a(785893);let y={helpfulStyle:{backgroundImage:`url(${g})`},lovedStyle:{backgroundImage:`url(${p})`}},f=({response:e,handleReactionListHover:t,maybeDismissReactionListWithDelay:a})=>{(0,i.useEffect)(()=>{(0,n.Z)("ReactionUser","/app/packages/comment/ReactionUser.tsx")},[]);let o=14===e.reaction_type,r=1===e.reaction_type,s=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,h.jsxs)(l.kC,{alignItems:"center",children:[(0,h.jsx)(l.Tg,{href:`/${e.user.username}/`,onBlur:a,onFocus:t,children:(0,h.jsxs)(l.kC,{alignItems:"center",children:[(0,h.jsx)(l.xu,{maxWidth:40,children:(0,h.jsx)(_.qE,{accessibilityLabel:"",name:s,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,h.jsx)(l.xu,{marginStart:2,maxWidth:80,children:(0,h.jsx)(l.xv,{size:"100",weight:"bold",children:s})})]})}),(0,h.jsxs)(l.xu,{alignContent:"end",display:"flex",padding:2,children:[r&&(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:y.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),o&&(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:y.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var v=a(935059),x=a(661376),T=a(200619),E=a(601871);let b=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],C=({commentId:e,handleReactionListHover:t,isMarkedHelpfulByMe:a,isLovedByMe:o,isTry:r,maybeDismissReactionListWithDelay:s})=>{(0,i.useEffect)(()=>{(0,n.Z)("ReactionList","/app/packages/comment/ReactionList.tsx")},[]);let d=(0,v.Z)(),c=(0,T.Z)(),m=(0,x.Z)({name:"ApiResource",options:{url:r?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:b}}),u=(0,E.lJ)(d,c)||("id"in d&&d.id?d.id:""),g=m.data;(o||a)&&g&&(g=g.filter(e=>e.user.id!==u),g=[{id:e,reaction_type:o?1:14,user:{first_name:(0,E.Fk)(d,c),full_name:(0,E.Fk)(d,c),id:u,image_medium_url:(0,E.gJ)(d,c),is_private_profile:!!d.isAuth&&!!d.isPrivateProfile,username:(0,E.Ms)(d,c)}},...g]);let p=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let{current:e}=p,t=()=>{m.isFetching||(m.isAtEnd?e?.removeEventListener("scroll",t):m.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[m]),(0,h.jsx)(l.xu,{ref:p,maxHeight:140,overflow:"auto",rounding:2,width:200,children:g?.map(e=>(0,h.jsx)(l.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:(0,h.jsx)(f,{handleReactionListHover:t,maybeDismissReactionListWithDelay:s,response:e})},e.id))})};var I=a(24246),L=a(216975),k=a(825605),A=a(113759);let S=(0,i.lazy)(()=>a.e("22979").then(a.bind(a,674565))),D="comment-reaction-container-entry-point",P=({commentId:e,dismissReactionList:t,helpfulCount:a,isDesktop:o,isMarkedHelpfulByMe:r,isLovedByMe:s,isReactionListOpen:d,isTry:c,lovedCount:m,onReactionCountHover:_,onToggleHelpful:y,onToggleLove:f})=>{(0,i.useEffect)(()=>{(0,n.Z)("CommentReactionContainer","/app/packages/comment/CommentReactionContainer.tsx")},[]);let v=(0,I.Z)(),{isCommentComposerFocused:x}=(0,A.x4)(),T=(0,i.useRef)(null),E=o?16:12,[b,P]=(0,i.useState)(!1),w=!1,j=(m||0)+(a||0);r&&s&&(j-=1);let R=e=>()=>{P(e)},M=()=>{w=!0,_()},O=()=>{w=!1,setTimeout(()=>{w||t()},1e3)},Z=o?(0,h.jsx)(l.xu,{"data-test-id":D,children:b?(0,h.jsx)(l.iP,{onMouseLeave:R(!1),onTap:R(!1),children:(0,h.jsx)(k.Z,{children:(0,h.jsx)(S,{onTooltipHover:R(!1),setHelpful:y(!0),setLoved:f(!0)})})}):(0,h.jsx)(l.iP,{onMouseEnter:R(!0),onTap:R(!0),children:(0,h.jsx)(l.JO,{accessibilityLabel:v._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart-outline",size:E})})}):(0,h.jsx)(l.xu,{"data-test-id":D,margin:-1.5,children:(0,h.jsx)(l.hU,{accessibilityLabel:v._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),icon:"heart-outline",onClick:f(!0),size:"xs"})});return(0,h.jsxs)(l.kC,{alignItems:"center",gap:{row:o?1:1.5,column:0},children:[r||s?(0,h.jsx)(l.iP,{onTap:()=>{y(!1)(),f(!1)()},children:(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${s?p:g})`,backgroundSize:"contain"}},"data-test-id":s?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:E,width:E})}):Z,j>0&&(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(l.iP,{accessibilityLabel:(0,L.Wc)(v.ngettext('{{reactionCount}} Reaction', '{{reactionCount}} Reactions', j, 'Comment.CommentReactionContainer.ariaLabel', 'accessibility label for the number of reactions to a comment. reactionCount: number of reactions'),{reactionCount:j.toString()}),onMouseEnter:M,onMouseLeave:O,onTap:M,children:(0,h.jsx)(l.xu,{ref:T,"data-test-id":"comment-reaction-container-reaction-count",display:o?void 0:"flex",children:(0,h.jsx)(l.xv,{color:o?"subtle":"default",inline:!0,size:o?"200":"100",weight:"bold",children:j})})}),d&&(0,h.jsx)(l.mh,{zIndex:u.Ty,children:(0,h.jsx)(l.J2,{anchor:T.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,shouldFocus:!x,children:(0,h.jsx)(l.iP,{onMouseEnter:M,onMouseLeave:O,children:(0,h.jsx)(C,{commentId:e,handleReactionListHover:M,isLovedByMe:s,isMarkedHelpfulByMe:r,isTry:c,maybeDismissReactionListWithDelay:O})})})})]})]})};var w=a(812928),j=a(634395),R=a(351979),M=a(299136);function O(e){(0,i.useEffect)(()=>{(0,n.Z)("PhotoCommentContent","/app/packages/comment/PhotoCommentContent.tsx")},[]);let{comment:t,commentTags:a,handlePhotoTap:o,isDesktop:r,previewPhoto:s,taggedUsers:d}=e,[c,m]=(0,i.useState)(!1),{user:{username:u}}=t,g="text"in t?t.text:t.details,p=r?`${u} ${g}`:g,{height:_,url:y,width:f}=s||{},v=_??R.Vb,x=f??R.mu;return(0,h.jsxs)(l.xu,{children:[(0,h.jsx)(M.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:d,tags:a,text:p}),r||!r?(0,h.jsx)(l.xu,{marginBottom:r?void 0:1.5,marginTop:r?1:.5,children:(0,h.jsx)(R.ZP,{canEnlargePhoto:r,isSelectedPhoto:!1,previewPhoto:s})}):(0,h.jsx)(l.xu,{height:150,marginBottom:r?4:2,marginTop:1,width:150,children:(0,h.jsx)(l.iP,{disabled:!r,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onTap:o,children:(0,h.jsx)(l.zd,{rounding:2,wash:!0,children:y&&(0,h.jsx)(l.Ee,{alt:y,color:"#efefef",naturalHeight:v,naturalWidth:x,src:y,children:(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{cursor:r?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${.4*!!c})`}},height:"100%",width:"100%"})},y)})})})]})}var Z=a(351736),z=a(264267),G=a(438274);function N(e){(0,i.useEffect)(()=>{(0,n.Z)("ReplyThread","/app/packages/comment/ReplyThread.tsx")},[]);let{featuredCommentId:t,parentId:a,parentType:r,inCommentsImprovedDropdownExp:s,inCommentsPopover:d,isDesktop:c,isLoading:m,isReadOnly:u,openOverflowMenu:g,replyingToCommentId:p,toggleEditComposer:_,toggleHelpful:y,toggleLike:f,toggleReplyComposer:v,isORBACProfileManager:x,isVideo:T,storyPinDataId:E,pinId:b,closeupAttributionId:C,aggregatedPinDataId:k,closeupAttributionUsername:A,pinnerId:S,reactionListCommentId:D,showReactionListForComment:P,viewParameter:w}=e,j=(0,I.Z)(),R=(0,Z.vs)(),M=(0,z.lV)(),O=(0,o.v9)(({feeds:e})=>{let t=e[`${G.Z.AGGREGATED_COMMENT_REPLIES}:${a}`]||[],n=e[`${G.Z.AGGREGATED_COMMENTS}:${a}`]||[];return t.concat(n).reduceRight((e,{id:t})=>{let a=M[t];return a?[...e,a]:e},[])}),N=(0,i.useRef)(!0),F=(0,i.useRef)(O.length),[U,H]=(0,i.useState)(1),[K,V]=(0,i.useState)(!1),B=U===O.length;return(0,i.useEffect)(()=>{let e=F.current,t=O.length;N.current?t>0&&(N.current=!1):t>e&&V(!0),t!==e&&H(e=>e>1?t:+(t>0)),F.current=t},[O.length]),(0,h.jsxs)(i.Fragment,{children:[O.length>1&&(0,h.jsx)(l.iP,{onTap:()=>{H(B?0:O.length)},children:(0,h.jsxs)(l.xu,{alignItems:c?void 0:"center",display:c?void 0:"flex",marginBottom:c?4:6,children:[c?(0,h.jsx)(l.xu,{display:"inlineBlock",marginEnd:2,children:(0,h.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}):(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{background:R?"white":"black"}},height:1,marginEnd:2,width:32}),(0,h.jsx)(l.xv,{color:c?"subtle":"default",inline:!0,size:"100",weight:"bold",children:B?j._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,L.nk)(j.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', O.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:O.length})})]})}),(0,h.jsx)(es,{aggregatedPinDataId:k,closeupAttributionId:C,closeupAttributionUsername:A,comments:(()=>{if(0===U||0===O.length)return[];if(1===U)if(K)return O.slice(-1);else return O.slice(0,1);return O.slice(0,U)})(),commentsDisabled:!1,featuredCommentId:t,gapSize:c?2:6,inCommentsImprovedDropdownExp:s,inCommentsPopover:d,isDesktop:c,isLoading:m,isORBACProfileManager:x,isReadOnly:u,isVideo:T,openOverflowMenu:g,parentId:a,parentType:r,pinId:b,pinnerId:S,reactionListCommentId:D,replyingToCommentId:p,showReactionListForComment:P,storyPinDataId:E,toggleEditComposer:_,toggleHelpful:y,toggleLike:f,toggleReplyComposer:v,userAvatarSize:"sm",viewParameter:w})]})}var F=a(230201),U=a(236269),H=a(924591),K=a(995514),V=a(424868),B=a(774838),W=a(233597),$=a(577356),q=a(107889),J=a(118376),Q=a(872003),X=a(409997),Y=a(426130),ee=a(826681),et=a(9065);let ea=(0,i.lazy)(()=>a.e("8184").then(a.bind(a,265994))),en=(0,et.Z)(()=>a.e("73842").then(a.bind(a,715490)),void 0,e=>715490,"app-packages-comment-CommentOverflowPopover",e=>["73842"]),ei=(0,i.lazy)(()=>a.e("90658").then(a.bind(a,167446)));function el(e){let t,a;(0,i.useEffect)(()=>{(0,n.Z)("Comment","/app/packages/comment/Comment.tsx")},[]);let{aggregatedPinDataId:g,closeupAttributionId:p,closeupAttributionUsername:_,comment:y,featuredCommentId:f,inCommentsImprovedDropdownExp:x,inCommentsPopover:b,isDesktop:C,isReadOnly:S,isVideo:D,openOverflowMenu:R,toggleReplyComposer:G,parentId:et,parentType:el=q.o.pin,pinId:eo,storyPinDataId:er,replyingToCommentId:es,showReactionListForComment:ed,showTopCommentHeading:ec,toggleEditComposer:em,toggleHelpful:eu,toggleLike:eg,userAvatarSize:ep,isORBACProfileManager:e_,pinnerId:eh,reactionListCommentId:ey,viewParameter:ef}=e,{user:{id:ev,first_name:ex,id:eT,image_medium_url:eE,username:eb},id:eC,is_translatable:eI,comment_count:eL,helpful_count:ek,tags:eA=[]}=y,[eS,eD]=(0,i.useState)(!1),eP=eS&&y.translatedText||y.text,ew=!eI||""===y.translatedText,ej=(0,J.Z)(),eR=!1,eM=0,eO=!1,eZ=!!y.marked_helpful_by_me,ez=C?[y.user]:[],eG="",eN=new Date;"aggregatedcomment"===y.type?(eR=y.highlighted_by_pin_owner,eM=y.reaction_counts[1],eO=y.reaction_by_me>0,a=y?.media?.sticker,ez.push(...y.tagged_users),eG=C?`${eb} ${eP??""}`:eP??"",eN=new Date(y.created_at)):(eM=y.like_count,eO=y.liked_by_me,t=y.images[0]||{},eG=C?`${eb} ${y.details}`:y.details,eN=new Date(y.done_at));let eF=t?.originals,eU=a||eF,eH=(0,I.Z)(),eK=(0,v.Z)(),{setIsMediaViewerOpen:eV,clientTrackingParams:eB,setIsCommentPopoverInteractionActive:eW}=(0,A.x4)(),{logContextEvent:e$}=(0,F.u)(),{isBot:eq}=(0,B.B)(),{showToast:eJ}=(0,$.dI)(),eQ=(0,o.I0)(),eX=(0,Z.vs)(),eY=(0,i.useRef)(null),{hasApplicableLawForCountry:e0}=(0,X.ZP)(),e1=!S||e0,e3="aggregatedcomment"===y.type&&1===y.comment_tag,e6=e3&&C,e7=(0,T.Z)(),e2=(0,E.lJ)(eK,e7),{nativeEngagementsHiddenForUser:e4}=(0,Q.G)(),{aggregatedCommentsHiddenForUser:e9,translateAggregatedComment:e8,updateAggregatedComment:e5}=(0,z.nf)(),te=(0,d.Z)(),tt="userdiditdata"===y.type,ta=(0,K.Z)(),tn=eI&&!1,ti=`comment-overflow-popover-${eC}`,tl=(0,u.zs)(eb,eA,eX,!C),to={SHOW_TRANSLATION:eH._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:eH._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:eH._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},tr=(0,i.useRef)(to.SHOW_TRANSLATION),[ts,td]=(0,s.Z)(),[tc,tm]=(0,i.useState)(!1),[tu,tg]=(0,i.useState)(!1),[tp,t_]=(0,i.useState)(!1),[th,ty]=(0,i.useState)(!1),[tf,tv]=(0,i.useState)(!1),[tx,tT]=(0,i.useState)(!1),[tE,tb]=(0,i.useState)(!1),[tC,tI]=(0,i.useState)(u.A9.NONE),tL=e=>()=>{em?em(y):tg(e)};(0,i.useEffect)(()=>{tn&&e$({event_type:10416,view_type:3,view_parameter:ef,component:"pin"===el?13696:13697})},[e$,el,tn,ef]),(0,i.useEffect)(()=>{eL>0&&!eq&&eQ((0,W.U)("aggregatedcomment"===y.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:eC,redux_normalize_feed:!0}}))},[y.type,eC]);let tk=el.toLowerCase()===q.o.aggregatedComment.toLowerCase()||el.toLowerCase()===q.n.didIt.toLowerCase(),tA=y.user.first_name||"",tS=async({contentMarkdown:e,force:t,tags:a})=>{let n,i;ty(!0);let l=y.id;if(tk&&(n=el.toLowerCase()===q.n.didIt,l=et,i=y.id),l)try{await te({force:t,fromUnifiedComment:!0,objectType:tt||n?q.o.didIt:q.o.aggregatedComment,objectId:l,orbacSubjectId:e2,tags:a,text:e,replyToCommentId:i})}catch(t){let e=(0,U.Z)(t,"code");if([V.ky,V.LJ].includes(e??0)&&C)return tI(e===V.ky?u.A9.WARNING:u.A9.BLOCK),ty(!1),!1}return G&&G(void 0),ty(!1),!0},tD=async({contentMarkdown:e,force:t,tags:a})=>{t_(!0);try{tt?await eQ((0,Y.IU)({id:y.id,details:e,pinId:eo??"",image_signatures:"image_signatures"in y&&y.image_signatures?y.image_signatures:[]})):await e5({commentId:y.id,force:t,orbacSubjectId:e2,tags:a,text:e})}catch(e){if([V.ky,V.LJ].includes((0,U.Z)(e,"code")??0)&&C)return tI(e.code===V.ky?u.A9.WARNING:u.A9.BLOCK),t_(!1),!1}return tg(!1),t_(!1),!0},tP=()=>{C?(eW(!tc),tm(!tc)):R&&R(y)},tw=e=>()=>{eW(e),tm(e),tb(e),e||e$({component:14349,event_type:9408})},tj=()=>{tI(u.A9.NONE)},tR=e=>{e?td():ts(),eV(!e),tv(!e)};(0,i.useEffect)(()=>{eS&&ew&&(eD(!eS),eJ(({hideToast:e})=>(0,h.jsx)(H.Z,{onHide:e,text:eH._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[eS,ew]),eS?tr.current=y.translatedText?to.SHOW_ORIGINAL:to.TRANSLATING:tr.current=to.SHOW_TRANSLATION;let tM=C?128:110,tO="aggregatedcomment"===y.type&&y.media?.sticker?.image_url&&(0,h.jsx)(l.xu,{height:tM,marginBottom:+!!C,marginTop:1,width:tM,children:y.media?.sticker?.image_url&&(0,h.jsx)(l.Ee,{alt:y.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:y.media.sticker.image_url})});return(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(l.xH,{accessibilityLabel:"Loading comment",show:tp}),!tu&&!tp&&(0,h.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,h.jsx)(l.xu,{marginEnd:2,children:(0,h.jsx)(r.rU,{to:`/${eb}/`,children:(0,h.jsx)(m.Z,{isQuestion:e6,name:ex||eb||"",size:ep,src:eE??""})})}),(0,h.jsxs)(l.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,h.jsxs)(l.kC,{justifyContent:"between",children:[(0,h.jsx)(l.kC.Item,{minWidth:0,children:(0,h.jsxs)(l.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[!C&&(0,h.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[(0,h.jsx)(M.Z,{isFirstTaggedUserAuthor:!0,lineHeight:"14px",marginEnd:0,shouldShowFirstNameOnly:!0,size:"100",taggedUsers:[y.user],tags:(0,u.zs)(eb,[],eX),text:eb}),e3&&!ec&&(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:"14px"}},children:(0,h.jsx)(l.xv,{color:"subtle",size:"100",children:eH._('asked a question \uD83D\uDC40', 'comment.question.label', 'label on a comment that is a question')})}),ec&&(0,h.jsxs)(l.kC,{children:[(0,h.jsx)(l.xu,{alignItems:"center",display:"flex",marginEnd:1,children:(0,h.jsx)(l.JO,{accessibilityLabel:(0,u.yW)(eH),color:"recommendation",icon:"star",size:12})}),(0,h.jsx)(l.xv,{color:"recommendation",size:"100",weight:"bold",children:(0,u._q)(eH)})]}),(e3||ec)&&eN&&(0,h.jsx)(l.xv,{color:"subtle",size:"100",children:"·"}),eN&&(0,h.jsx)(l.xu,{"data-test-id":"comments-time-passed",children:(0,h.jsx)(l.xv,{color:"subtle",size:"100",children:ta(eN,!0)})})]}),tt?(0,h.jsx)(O,{comment:y,commentTags:tl,handlePhotoTap:()=>tR(tf),isDesktop:C,previewPhoto:eF,taggedUsers:ez}):(0,h.jsx)(M.Z,{isFirstTaggedUserAuthor:!!C,lineHeight:C?void 0:"21px",marginBottom:C?void 0:"4px",shouldShowFirstNameOnly:!0,taggedUsers:ez,tags:tl,text:eG}),tO,tn&&(0,h.jsx)(l.xu,{marginBottom:2,marginTop:2,children:(0,h.jsx)(l.iP,{onTap:()=>void(!eS&&!y.translatedText&&e8(y.id),eS||tr.current!==to.SHOW_TRANSLATION?eS&&tr.current===to.SHOW_ORIGINAL&&e$({event_type:10418,view_type:3,view_parameter:ef,component:"pin"===el?13696:13697}):e$({event_type:10417,view_type:3,view_parameter:ef,component:"pin"===el?13696:13697}),eD(!eS)),children:(0,h.jsx)(l.xv,{color:"subtle",size:"300",weight:"bold",children:tr.current})})})]})}),f===eC&&(0,h.jsx)(l.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eR&&(0,h.jsx)(l.xu,{marginBottom:C?3:1.5,marginTop:C?4:-.5,children:(0,h.jsx)(l.xv,{size:"100",children:(0,L.nk)(eH._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:_})})}),e1&&(0,h.jsx)(l.xu,{alignItems:"center",display:"flex",height:C?25:"100%",justifyContent:"between",position:"relative",children:(0,h.jsxs)(l.kC,{alignItems:"center",gap:{row:C?5:4,column:0},children:[!S&&C&&(0,h.jsx)(l.xu,{"data-test-id":"comments-time-passed",children:(0,h.jsx)(l.xv,{color:"subtle",size:"200",children:ta(eN,!0)})}),!S&&(0,h.jsx)(l.xu,{"data-test-id":"comment-reply-button-container",children:(0,h.jsx)(l.iP,{onTap:()=>{G&&G(y,et,el)},children:(0,h.jsx)(l.xv,{color:C?"subtle":"default",size:C?"200":"100",weight:"bold",children:eH._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!S&&(0,h.jsx)(P,{commentId:eC,dismissReactionList:()=>{ed(void 0)},helpfulCount:ek,isDesktop:C,isLovedByMe:eO,isMarkedHelpfulByMe:eZ,isReactionListOpen:ey===eC,isTry:tt,lovedCount:eM,onReactionCountHover:()=>{ed(eC),e$({event_type:9906,component:"pin"===el?13696:13697,view_type:3,view_parameter:ef})},onToggleHelpful:e=>()=>{eZ!==e&&eu(eC,!e,tt)()},onToggleLove:e=>()=>{eO!==e&&eg(eC,!e,tt)()}}),!("id"in eK&&eK.id===eT&&e3)&&(C?(0,h.jsx)(l.xu,{ref:eY,"data-test-id":"comment-more-options",children:(0,h.jsx)(l.hU,{accessibilityControls:ti,accessibilityExpanded:tc,accessibilityHaspopup:!0,accessibilityLabel:eH._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"subtle",onClick:tP,size:"xs"})}):(0,h.jsx)(l.xu,{"data-test-id":"comment-more-options",children:(0,h.jsx)(l.iP,{accessibilityControls:ti,accessibilityExpanded:tc,accessibilityHaspopup:!0,onTap:tP,children:(0,h.jsx)(l.JO,{accessibilityLabel:eH._('More', 'comment.button.more', 'see more options for comment'),color:eX?"light":"dark",icon:"ellipsis",size:12})})}))]})})]})]}),C&&(0,h.jsxs)(i.Fragment,{children:[tu&&!(b||x)&&(0,h.jsx)(l.xu,{marginTop:3,children:(0,h.jsx)(w.Z,{clientTrackingParams:eB,commentWarningModalState:tC,dismissCommentWarningModal:tj,initialTags:y.tags,initialText:"aggregatedcomment"===y.type?y.text:y.details,isEditing:!0,objectType:q.o.aggregatedComment,onAddItem:tD,onCancelItem:tL(!1),postedPhoto:eU,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ef})}),es===eC&&(0,h.jsx)(l.xu,{marginStart:12*!tk,marginTop:3,children:(0,h.jsx)(w.Z,{commentWarningModalState:tC,dismissCommentWarningModal:tj,initialTags:tk?[{offset:0,object_id:ev,length:tA.length,tag_type:1}]:[],initialText:tk?`${tA} `:"",isReplying:!0,objectType:q.o.aggregatedComment,onAddItem:tS,onCancelItem:()=>{G&&G()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ef})})]}),(eL>0||th)&&(0,h.jsx)(l.xu,{marginStart:C?12:10,marginTop:C?4:3,children:(0,h.jsx)(N,{aggregatedPinDataId:g,closeupAttributionId:p,closeupAttributionUsername:_,featuredCommentId:f,inCommentsImprovedDropdownExp:x,inCommentsPopover:b,isDesktop:C,isLoading:th,isORBACProfileManager:e_,isReadOnly:S,isVideo:D,openOverflowMenu:R,parentId:eC,parentType:y.type,pinId:eo,pinnerId:eh,reactionListCommentId:ey,replyingToCommentId:es,showReactionListForComment:ed,storyPinDataId:er,toggleEditComposer:em,toggleHelpful:eu,toggleLike:eg,toggleReplyComposer:G,viewParameter:ef})}),C&&e1&&(0,h.jsx)(en,{aggregatedPinDataId:g,anchor:eY.current,closeupAttributionId:p,comment:y,dismiss:e=>{tm(!1),e||(eW(!1),e$({component:14349,event_type:10128}))},id:ti,inCommentsPopover:!!b,isOpen:tc,isReply:tk,onEdit:tL(!0),onShowBlockUserModal:tw(!0),parentId:et,pinId:eo}),tx&&(0,h.jsx)(k.Z,{children:(0,h.jsx)(c.N,{children:(0,h.jsx)(ei,{aggregatedPinDataId:g,didItDataId:eC,onClose:e=>()=>{tT(!e)},pinId:eo??"",username:eb,users:[y.user]})})}),tE&&(0,h.jsx)(k.Z,{children:(0,h.jsx)(ea,{firstName:ex??"",onBlockUser:()=>{eQ((0,ee.Ge)({id:ev,orbacSubjectId:e2,blockSource:"comment",blockContext:eC,logContextEvent:e$})),e9(ev),e4(ev),e$({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eK.isAuth?eK.id:null}}),e$({component:14349,event_type:9407}),tb(!1),ej(),eW(!1)},onClearModal:tw(!1)})}),!!eF&&tf&&(0,h.jsx)(j.Z,{onDismiss:()=>tR(tf),photo:eF})]})}var eo=a(79271),er=a(40763);function es(e){let t,a;(0,i.useEffect)(()=>{(0,n.Z)("CommentThread","/app/packages/comment/CommentThread.tsx")},[]);let{aggregatedPinDataId:o,comments:r,commentsDisabled:s,commentsScrollContainerRef:d,featuredCommentId:c,gapSize:m=6,id:g,inCommentsImprovedDropdownExp:p,inCommentsPopover:_,isDesktop:y,isLoading:f=!1,isReadOnly:v,openOverflowMenu:x,toggleReplyComposer:T,parentId:E,parentType:b,replyingToCommentId:C,showingCloseupCommentModule:L,toggleEditComposer:k,toggleHelpful:S,toggleLike:D,userAvatarSize:P,isORBACProfileManager:w,isVideo:j,storyPinDataId:R,pinId:M,closeupAttributionId:O,closeupAttributionUsername:Z,pinnerId:z,showReactionListForComment:G,reactionListCommentId:N,viewParameter:F}=e,U=(0,I.Z)(),{closeupWithinMasonryEnabled:H}=(0,A.x4)(),K=(0,er.Z)({skipExpActivation:!0}),V=!!L&&!1;return(_?t="12px":H&&(t="8px"),a=R?"story":j?"video":"pin",s)?(0,h.jsx)(l.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:H?2:void 0,width:"100%",children:(0,h.jsx)(l.xv,{align:y?"start":"center",color:"subtle",children:U._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):0!==r.length||"pin"!==b||f||y?r.length>0?(0,h.jsxs)(l.xu,{ref:d,dangerouslySetInlineStyle:{__style:{gap:`${4*m}px 0`,overscrollBehavior:_?"none":"auto",scrollbarGutter:H?"stable":void 0,paddingTop:t,overflowX:K?"scroll":void 0}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",id:g,maxHeight:H&&!_?722:"100%",overflow:H?"auto":void 0,width:"100%",children:[r.map((e,t)=>(0,h.jsx)(eo.Fw,{componentType:"pin"===b?13696:13697,impressionAuxFields:{commentId:e.id,pinId:M,pinOwnerUserId:O,pinType:a,parentId:E,parentType:b,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:t,viewType:y?3:98,children:({impressionTrackerRef:a})=>{let n=t===r.length-1;return(0,h.jsx)(l.xu,{ref:a,"aria-label":U._('Comment thread', 'commentThread.ariaLabel', 'Accessible label for the comment thread'),dangerouslySetInlineStyle:{__style:{paddingBottom:_&&n?"24px":"0px"}},"data-test-id":"commentThread-comment",role:"group",tabIndex:0,children:(0,h.jsx)(el,{aggregatedPinDataId:o,closeupAttributionId:O,closeupAttributionUsername:Z,comment:e,featuredCommentId:c,inCommentsImprovedDropdownExp:p,inCommentsPopover:_,isDesktop:y,isORBACProfileManager:w,isReadOnly:v,isVideo:j,openOverflowMenu:x,parentId:E,parentType:b,pinId:M,pinnerId:z,reactionListCommentId:N,replyingToCommentId:C,showReactionListForComment:G,showTopCommentHeading:V&&0===t,storyPinDataId:R,toggleEditComposer:k,toggleHelpful:S,toggleLike:D,toggleReplyComposer:T,userAvatarSize:P,viewParameter:F})})}},e.id)),f&&(0,h.jsx)(l.xH,{accessibilityLabel:U._('Comments loading', ' - ', ' -- '),show:f})]}):(0,h.jsx)(l.xu,{alignSelf:"center",width:"100%",children:(0,h.jsx)(l.xH,{accessibilityLabel:U._('Comments loading', ' - ', ' -- '),show:f})}):(0,h.jsx)(l.xu,{alignSelf:"center","data-test-id":"no-comments-label",width:"100%",children:(0,h.jsx)(l.xv,{align:"center",color:"subtle",children:(0,u.OW)(U)})})}},812928:function(e,t,a){a.d(t,{Z:()=>s});var n=a(686659),i=a(667294),l=a(317109),o=a(785893);let r=(0,i.lazy)(()=>Promise.all([a.e("95964"),a.e("98800")]).then(a.bind(a,269936)));function s(e){return(0,i.useEffect)(()=>{(0,n.Z)("InlineCommentComposer","/app/packages/comment/InlineCommentComposer.tsx")},[]),(0,o.jsx)(l.Z,{fallback:null,children:(0,o.jsx)(r,{...e})})}},634395:function(e,t,a){a.d(t,{Z:()=>c});var n=a(686659),i=a(667294),l=a(740097),o=a(291211),r=a(289935),s=a(24246),d=a(785893);function c({onDismiss:e,photo:t}){(0,i.useEffect)(()=>{(0,n.Z)("MediaViewer","/app/packages/comment/MediaViewer.tsx")},[]);let a=(0,s.Z)(),{height:c,url:m,width:u}=t,g=Math.min(c??936,936),p="100vh",_=a._('Close media viewer', 'comments.photo.mediaViewer.close', 'Close media viewer overlay');return(0,d.jsxs)(l.mh,{zIndex:r.b7,children:[(0,d.jsx)(l.iP,{mouseCursor:"zoomOut",onTap:e,children:(0,d.jsxs)(l.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:p,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,d.jsx)(l.xu,{left:!0,padding:5,position:"absolute",top:!0,children:(0,d.jsx)(l.hU,{accessibilityLabel:_,icon:"cancel",iconColor:"white",onClick:e,padding:3,size:"lg"})}),(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:p,maxHeight:g,width:u,children:m&&(0,d.jsx)(l.Ee,{alt:m??"",fit:"contain",naturalHeight:c??1,naturalWidth:u??1,src:m},m)})]})}),(0,d.jsx)(o.Z,{onClose:e})]})}},351979:function(e,t,a){a.d(t,{Vb:()=>_,ZP:()=>y,mu:()=>h});var n=a(686659),i=a(667294),l=a(740097),o=a(219077),r=a(458465),s=a(55806),d=a(634395),c=a(24246),m=a(774838),u=a(739405),g=a(113759),p=a(785893);let _=150,h=346;function y({canEnlargePhoto:e,containerWidth:t,isSelectedPhoto:a,previewPhoto:y,removeSelectedPhoto:f}){(0,i.useEffect)(()=>{(0,n.Z)("PhotoCommentPreview","/app/packages/comment/PhotoCommentPreview.tsx")},[]);let v=(0,c.Z)(),x=(0,u.HG)(),{isRTL:T}=(0,m.B)(),{setIsMediaViewerOpen:E}=(0,g.x4)(),[b,C]=(0,o.Z)(),[I,L]=(0,i.useState)(!1),[k,A]=(0,i.useState)(!1),[S,D]=(0,i.useState)(null),[P,w]=(0,i.useState)(r.WU),j=(0,s.Z)(y)?y?.url:y?.image_url;(0,i.useEffect)(()=>{(async()=>{j&&!(0,s.Z)(y)&&D(await new Promise((e,t)=>{let a=new Image;a.onload=()=>{e({width:a.width,height:a.height})},a.onerror=t,a.src=j}))})()},[j,y]);let R=(0,s.Z)(y)?y?.width:S?.width,M=(0,s.Z)(y)?y?.height:S?.height,O=R??0,Z=M??0,z=j??"",G=Math.min((t||(x?h:312))/O,(x?_:110)/Z,1),N=v._('Remove photo', 'photoCommentPreview.removePhoto', 'Icon to remove the selected photo from the comment composer'),F=v._('Photo', 'photoCommentPreview.previewPhoto', 'Photo previewed as part of a comment'),U=e=>{e?C():b(),E(!e),L(!e)};return(0,p.jsxs)(l.xu,{height:G*Z,marginTop:3*!!a,position:"relative",width:G*O,children:[(0,p.jsx)(l.iP,{disabled:!e,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),onTap:()=>U(I),children:(0,p.jsx)(l.zd,{rounding:2,children:z&&(0,p.jsx)(l.Ee,{alt:F,color:P,naturalHeight:Z,naturalWidth:O,onLoad:()=>{w(r.o),a&&URL.revokeObjectURL(z)},src:z,children:e&&(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${.4*!!k})`}},height:"100%",width:"100%"})},F)})}),a&&(0,p.jsx)(l.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:T,marginEnd:-3,marginTop:-3,position:"absolute",right:!T,top:!0,width:24,children:(0,p.jsx)(l.hU,{accessibilityLabel:N,bgColor:"lightGray",icon:"cancel",onClick:f,size:"xs"})}),I&&(0,p.jsx)(d.Z,{onDismiss:()=>U(I),photo:y})]})}},299136:function(e,t,a){a.d(t,{Z:()=>r});var n=a(686659),i=a(667294),l=a(740097),o=a(785893);let r=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:a,marginBottom:r,marginEnd:s,shouldShowFirstNameOnly:d,size:c,tags:m,taggedUsers:u,text:g})=>{(0,i.useEffect)(()=>{(0,n.Z)("TaggedText","/app/packages/comment/TaggedText.tsx")},[]);let p=(0,i.useRef)(null),_=(e,t)=>(0,o.jsx)(l.xv,{inline:!0,overflow:"normal",size:c,children:(0,o.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:a,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t);return(0,o.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:r}},children:(()=>{if(!m.length||!u||m.length!==u.length)return _(g,"1");let n=0,i=[];return m.forEach((a,r)=>{let s=g.substring(n,a.offset);n=a.offset+a.length;let m=g.substring(a.offset,n);i=i.concat(_(s,`${r}a`)).concat(((a,n,i,r)=>{let s=d||0===i&&t?u[i].first_name||u[i].username[0]:n;return(0,o.jsx)(l.xv,{color:a,inline:!0,overflow:"normal",size:c,weight:"bold",children:e?s:(0,o.jsx)(l.rU,{display:"inlineBlock",href:`/${u[i].username}`,underline:"hover",children:s})},r)})(a.color,m,r,`${r}b`))}),i=i.concat(_(g.substring(n),"2")),(0,o.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:a}},display:d?"flex":void 0,marginEnd:s??3,position:"relative",children:(0,o.jsx)(l.xv,{ref:p,inline:!0,lineClamp:e?1:void 0,size:c,children:i})})})()})}},458465:function(e,t,a){a.d(t,{A9:()=>_,F1:()=>I,Ff:()=>C,G5:()=>L,G_:()=>b,Gu:()=>E,LH:()=>r,OW:()=>v,Rv:()=>m,TJ:()=>g,Ty:()=>l,WU:()=>y,XU:()=>c,_q:()=>D,i$:()=>f,iB:()=>o,je:()=>s,mi:()=>k,o:()=>h,pW:()=>p,qJ:()=>P,sp:()=>A,uC:()=>d,xA:()=>u,yQ:()=>S,yW:()=>T,zs:()=>x});var n=a(740097),i=a(696749);let l=new n.Ry(3),o=48,r=56,s="sm",d=500,c=1,m=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),u=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),g="comment_featured_ids",p="did_it_featured_ids",_={NONE:"none",WARNING:"warning",BLOCK:"block"},h="transparent",y="#efefef",f=(e,t)=>e?(0,i.Z)(t.ngettext('{{ count }} Comment', '{{ count }} Comments', e, 'closeup.commentThread.heading.commentCount', 'Comment count on a Pin. count: number of comments'),{count:e.toString()}):t._('No comments yet', 'closeup.commentThread.heading.noComments', 'Prompt for user to comment on Pin'),v=e=>e._('Write a comment, share feedback, or give a high-five to get the conversation going', 'emptyCommentThread.noComments.text', 'Text shown when there are no comments yet'),x=(e,t,a,n)=>{let i=t.map(t=>({...t,offset:(t.offset||0)+(n?0:e.length+1),color:"default"}));return n?i:[{offset:0,length:e.length,color:a?"light":"dark"},...i]},T=e=>e._('Insight heading icon', 'closeupCommentModuleHeading.icon', 'Icon displayed in the comment module heading'),E=e=>e._('No comments yet', 'emptyCommentThread.noComments.heading', 'Text shown when there are no comments yet'),b=e=>e._('Post', 'commentComposer.button.post', 'Post new comment'),C=e=>e._('posted a photo', 'comment.preview.text.photo', 'Comment preview text for an image that a user posted'),I=e=>e._('posted a sticker', 'comment.preview.text.sticker', 'Comment preview text for a sticker that a user posted'),L=e=>e._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button'),k=e=>e._('Select a photo', 'photoModal.button.accessibilityLabel', 'Accessibility label for photo modal button'),A=e=>e._('Select a sticker', 'stickerTray.button.accessibilityLabel', 'Accessibility label for sticker tray button'),S=e=>e._('Text editor', 'EditorWithMentions.container', 'Tappable area for the editor container'),D=e=>e._('Top Comment', 'closeupCommentModuleHeading.heading.topComment', 'Top Comment heading for the comment module'),P=e=>[L(e),k(e),b(e),A(e),S(e)]},55806:function(e,t,a){a.d(t,{Z:()=>n});let n=e=>e?.url!==void 0},296339:function(e,t,a){a.d(t,{Z:()=>d});var n,i=a(667294);a(167912);var l=a(183e3),o=a(173922);let r=(void 0!==n||(n=a(562802)).hash&&"64a50a10a8f854ca82309453d98f41a7"!==n.hash&&console.error("The definition of 'useGetMainPinImage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function s(e,t){return e&&t?`${e} ${t}w`:null}function d({pinKey:e}){let t=(0,l.Z)(r,e),{anyEnabled:a,group:n}=(0,o.Z)(),d=(0,i.useMemo)(()=>t?.imageSpec_736x||t?.imageSpec_564x||t?.imageSpec_orig||t?.imageSpec_474x||t?.imageSpec_236x,[t]),c=(0,i.useMemo)(()=>{if(!t)return;let e=[s(t.imageSpec_736x?.url,t.imageSpec_736x?.width),s(t.imageSpec_1200x?.url,t.imageSpec_1200x?.width),{enabled:null,enabled_564x:s(t.imageSpec_564x?.url,t.imageSpec_564x?.width),enabled_orig:s(t.imageSpec_orig?.url,t.imageSpec_orig?.width)}[n]].filter(Boolean);return e.length>1?e.join(", "):void 0},[t,n]),m=a?"100cqw":void 0;return(0,i.useMemo)(()=>({mainPinImage:{url:d?.url||"",height:d?.height||1,width:d?.width||1},srcSet:c,srcSizes:m}),[d,c,m])}},173922:function(e,t,a){a.d(t,{Z:()=>o});var n=a(501010),i=a(774838),l=a(739405);let o=({skipExpActivation:e=!1}={})=>{let{checkExperiment:t}=(0,n.Z)(),a=(0,l.HG)(),{isAuthenticated:o}=(0,i.B)();return o&&a?t("closeup_dweb_adaptive_images",{dangerouslySkipActivation:e}):{anyEnabled:!1,group:""}}},17658:function(e,t,a){a.d(t,{Z:()=>i});var n=a(667294);function i(e,t){let a=(0,n.useRef)([]),[i,l]=(0,n.useState)(),[o,r]=(0,n.useReducer)(i??(()=>t),t),s=(0,n.useCallback)(t=>{i?r(t):(a.current.length||e().then(e=>{l(()=>e.default)}),a.current=[...a.current,t])},[e,i]);return(0,n.useEffect)(()=>{i&&(a.current.forEach(r),a.current=[])},[i]),[o,s]}},264267:function(e,t,a){a.d(t,{pb:()=>v,nf:()=>x,lV:()=>T});var n=a(667294),i=a(581722),l=a(441143),o=a.n(l),r=a(27399),s=a(213491),d=a(681698),c=a(57887),m=a(360033),u=a(730056);let g={feature_map:Object.freeze({})},p=(e,t)=>{let a={...(0,u.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,m.ZP)(e,a)?e:a},_=(e,t)=>{if(e=e||g,"FETCH_COMPLETE"===t.type){let{payload:{resource:a,options:n={}}}=t,{data:i}=t.payload.response.resource_response;if("AggregatedCommentReplyFeedResource"===a||"ApiResource"===a&&n.url===`/v3/aggregated_comments/${n.data?.aggregated_comment}/replies/`||"ApiResource"===a&&n.url===`/v3/aggregated_pin_data/${n.data?.aggregated_pin_data}/comments/`||"DidItCommentsResource"===a){let t=(i||[]).reduce((t,a)=>(t[a.id]=p(e[a.id],a),t),{});return{...e,...t}}if("UnifiedCommentsResource"===a&&i&&i.length>0){let t=i.filter(e=>"aggregatedcomment"===e.type).reduce((t,a)=>(t[a.id]=p(e[a.id],a),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===a&&i&&i.length>0){let t=i.map(e=>e.aggregated_comment).reduce((t,a)=>(a&&(t[a.id]=p(e[a.id],a)),t),{}),a=i.map(e=>e.creator_reply).reduce((t,a)=>(a&&a.id&&(t[a.id]=p(e[a.id],a)),t),{});return{...e,...t,...a}}if("ApiResource"===a&&"/v3/aggregated_comments/features/"===n.url&&i&&Object.keys(i).length>0)return{...e,feature_map:i}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:a}}=t;return a.id?{...e,[a.id]:a}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:a}}=t,n={...e};return delete n[a],n}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:a}}=t;return Object.fromEntries(Object.entries(e??{}).filter(e=>e[1].user?.id!==a))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:a}}=t;return{...e,[a.id]:p(e?.[a.id],a)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:a}}=t,n=e?.[a.id],i=n?.reaction_counts[1]||0,l={1:a.reaction_by_me?i+1:i-1},o={...n,reaction_by_me:a.reaction_by_me,reaction_counts:l};return{...e,[a.id]:o}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:a}}=t,n=e?.[a.id],i=n?.helpful_count||0,l=a.marked_helpful_by_me?i+1:i-1,o={...n,marked_helpful_by_me:a.marked_helpful_by_me,helpful_count:l};return{...e,[a.id]:o}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:a}}=t,n={...e?.[a.aggregated_comment_id],highlighted_by_pin_owner:a.is_highlighted};return{...e,[a.aggregated_comment_id]:n}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:a}}}=t;return{...e,feature_map:{...e?.feature_map,...a}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:a,id:n}}=t,i=e?.[n];if(!i)return e;let l={...i,comment_count:i.comment_count+a};return{...e,[n]:l}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:a,tagged_users:n}}=t,i={...e?.[a],tagged_users:n};return{...e,[a]:i}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:a,translatedText:n}}=t,i={...e?.[a],translatedText:n};return{...e,[a]:i}}return e};var h=a(785893);let{Provider:y,get:f}=(0,s.Z)("AggregatedComments");function v({children:e}){let t=(0,i.v9)(({resources:e})=>e?.UnifiedCommentsResource),a=g;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),n=t?.reduce((e,t)=>(e[t.id]=p(a[t.id],t),e),{});a={...a,...n}});let[l,o]=(0,n.useReducer)(_,a),r=e=>{o({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentReplyFeedResource",r),(0,c.my)("AggregatedCommentReplyFeedResource",r),(0,c.Z8)("ApiResource",r),(0,c.my)("ApiResource",r),(0,c.Z8)("DidItCommentsResource",r),(0,c.my)("DidItCommentsResource",r),(0,c.Z8)("UnifiedCommentsPreviewResource",r),(0,c.my)("UnifiedCommentsPreviewResource",r),(0,c.Z8)("UnifiedCommentsResource",r),(0,c.my)("UnifiedCommentsResource",r);let s=(0,n.useMemo)(()=>({aggregatedComments:l,dispatch:o}),[l,o]);return(0,h.jsx)(y,{value:s,children:e})}function x(){let{dispatch:e}=f();return(0,n.useMemo)(()=>({aggregatedCommentCreated(t,a){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:a}})},aggregatedCommentDeleted:(t,a)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:a}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:a,detailedReasons:n})=>{let i=e?`/v3/aggregated_comments/${t}/flag/`:`/v3/did_it/${t}/flag/`;return(0,d.Z)({url:i,method:"PUT",data:{commentId:t,reason:a,detailedReasons:n}})},deleteCommentMention:async t=>{let{resource_response:a}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),n=a.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:n.id,tagged_users:n.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:a}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),n=a.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:n}})}catch(a){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:a,orbacSubjectId:n})=>{(0,d.Z)({url:`/v3/helpful/1/${t}/`,method:a?"DELETE":"POST",data:n?{orbac_subject_id:n}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!a}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:a,isHighlighted:n})=>{o()(t,"Could not find comment"),o()(a,"Could not find Pin"),await (0,d.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:a,highlight:!n}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:a,is_highlighted:!n}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:a,orbacSubjectId:n})=>{(0,d.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:a?"DELETE":"POST",data:{reaction_type:1,...n?{orbac_subject_id:n}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!a}}})},updateAggregatedComment:async({commentId:t,force:a,orbacSubjectId:n,tags:i,text:l})=>{let{resource_response:o}=await r.Z.create("AggregatedCommentResource",{commentId:t,force:a,tags:i,text:l,...n?{orbacSubjectId:n}:{}}).callUpdate({showError:!1}),{tagged_users:s}=o.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:s.map(e=>({...e})),tags:JSON.parse(i),text:l}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:a,passcode:n,userConfirmPasscode:i})=>{let{resource_response:l}=await (0,d.Z)({url:"/v3/aggregated_comments/features/",method:"PUT",data:{user:t,feature_map:JSON.stringify(a),passcode:n,user_confirm_skip_passcode:i??!1}});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:l.data??Object.freeze({})}}})},updateCommentCount:(t,a)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:a,id:t}})}}),[e])}function T(){let{aggregatedComments:e}=f();return e}},107889:function(e,t,a){a.d(t,{n:()=>i,o:()=>n});let n={aggregatedComment:"aggregatedComment",didIt:"didIt",pin:"pin"},i={aggregatedComment:"aggregatedcomment",didIt:"userdiditdata",pin:"pin"}},872003:function(e,t,a){a.d(t,{G:()=>u,Kl:()=>g,vo:()=>m});var n=a(667294),i=a(213491),l=a(57887),o=a(17658),r=a(785893);let s=()=>a.e("65333").then(a.bind(a,557189)),{Provider:d,get:c}=(0,i.Z)("NativeEngagements");function m({children:e}){let[t,a]=(0,o.Z)(s,[]);(0,l.Z8)("NativeInteractionsResource",e=>{a({type:"FETCH_COMPLETE",payload:e})}),(0,l.my)("NativeInteractionsResource",e=>{a({type:"FETCH_MORE_COMPLETE",payload:e})});let i=(0,n.useMemo)(()=>({dispatch:a,nativeEngagements:t}),[a,t]);return(0,r.jsx)(d,{value:i,children:e})}function u(){let{dispatch:e}=c();return(0,n.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function g(){let{nativeEngagements:e}=c();return e}},632492:function(e,t,a){a.d(t,{$8:()=>c,Dk:()=>d,Fk:()=>i,fS:()=>s,lI:()=>l,mS:()=>r,qW:()=>o});var n=a(740097);let i=new n.Ry(1),l=new n.Ry(3),o=2,r=new n.Ry(o),s=3,d=new n.Ry(100),c=new n.H3([d])},373779:function(e,t,a){a.d(t,{B:()=>j,Z:()=>M});var n,i,l,o=a(686659),r=a(667294),s=a(581722);a(167912);var d=a(740097),c=a(671862),m=a(935059),u=a(183e3),g=a(422578),p=a(244311),_=a(790985),h=a(707855),y=a(785575);let f=function({graphQLMutation:e,legacyOperation:t,dataKeyOrStrategy:a}){let n="Strategy"===a.kind?a.strategy:"GraphQL"===(0,h.g)(a.fragmentRef).kind?"GraphQL":"Legacy",[i,l]=(0,r.useState)(!1);switch((0,y.Z)(n,()=>(0,p.getFragment)(e).name),n){case"GraphQL":{let[t,a]=(0,g.useMutation)(e);return[(0,r.useCallback)(({variables:e,onCompleted:a,onError:n,updater:i,uploadables:l,optimisticUpdater:o,optimisticResponse:r,configs:s,onUnsubscribe:d})=>{t({variables:e,onCompleted:(e,t)=>{a&&a({kind:"GraphQL",data:e},t)},onError:n,updater:i,uploadables:l,optimisticUpdater:o,optimisticResponse:r,configs:s,onUnsubscribe:d})},[t]),a]}case"Legacy":return[(0,r.useCallback)(e=>{l(!0),t(e.variables).then(t=>{e.onCompleted&&e.onCompleted({kind:"Legacy",data:t},null)}).catch(t=>{e.onError&&e.onError(t)}).finally(()=>{l(!1)})},[t]),i];default:return(0,_.Z)(n,"Unknown mode")}};var v=a(501010),x=a(661376),T=a(739405),E=a(893957),b=a(200619),C=a(601871),I=a(264267),L=a(107889),k=a(301527),A=a(426130),S=a(646239),D=a(157498),P=a(305375),w=a(785893);let j=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:a,isDesktop:n,isReversed:i=!1,noCache:l=!1,orbacSubjectId:o=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:a,page_size:n?10:25,redux_normalize_feed:!0,is_reversed:i,...o?{orbac_subject_id:o}:{}},noCache:l}),R=(void 0!==n||(n=a(966597)).hash&&"38e173ab2c3107ebc5b3da9f216fac98"!==n.hash&&console.error("The definition of 'CommentThreadContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),M=({isReadOnly:e,pinKey:t,scrollContainer:n,showingCloseupCommentModule:g,viewParameter:p,toggleComposerForReply:_,openMwebOverflowMenu:h})=>{(0,r.useEffect)(()=>{(0,o.Z)("CommentThreadContainer","/app/www/comments/CommentThreadContainer.tsx")},[]);let{comment_id:y}=(0,P.Z)(),M=(0,s.I0)(),O=(0,T.HG)(),Z=(0,m.Z)(),z=(0,v.Z)().checkExperiment("web_use_mutation_or_legacy_experiment").anyEnabled,G=(0,u.Z)(R,t),N=(G?.aggregatedPinData?.commentCount||0)+(G?.aggregatedPinData?.didItData?.imagesCount||0),F=G?.aggregatedPinData?.entityId,U=G?.closeupAttribution?.entityId,H=G?.closeupAttribution?.username,K=G?.commentsDisabled,V=N>0&&!G?.commentsDisabled,B=!!G?.videos?.videoList,W=G?.entityId,$=G?.pinner?.entityId,q=G?.storyPinData?.entityId,J=(0,r.useRef)(V),Q=(0,b.Z)(),X=(0,C.lJ)(Z,Q),Y=z?"GraphQL":"Legacy",[ee]=f({dataKeyOrStrategy:{kind:"Strategy",strategy:Y},graphQLMutation:(void 0!==i||(i=a(177303)).hash&&"6abad0b1546231dd9301ca5510fb88f5"!==i.hash&&console.error("The definition of 'CommentThreadContainerLikeMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),legacyOperation:({userDidItData:e})=>(0,A.aX)({didItDataId:e,orbacSubjectId:X})}),[et]=f({dataKeyOrStrategy:{kind:"Strategy",strategy:Y},graphQLMutation:(void 0!==l||(l=a(483416)).hash&&"e8e5a11ac4f4d2e8c4a2ed9c7ee3c073"!==l.hash&&console.error("The definition of 'CommentThreadContainerUnLikeMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),legacyOperation:({userDidItData:e})=>(0,A.Wx)({didItDataId:e,orbacSubjectId:X})}),ea=(0,x.Z)(J.current&&F?j({aggregatedPinDataId:F,featuredCommentIds:y?[y]:[],isDesktop:O}):null),{removeUnauthCommentPinId:en,unauthCommentPinId:ei}=(0,k.o)(),el=(0,I.lV)(),{toggleAggregatedCommentHelpful:eo,toggleAggregatedCommentLike:er}=(0,I.nf)(),es=(0,D.dM)(),ed=(0,s.v9)(e=>(0,S.Z)(e,{aggregatedPinDataId:F,aggregatedComments:el,users:es})),[ec,em]=(0,r.useState)(void 0);(0,E.Z)(()=>{!O&&Z.isAuth&&ei&&W&&ei===W&&en()}),(0,r.useEffect)(()=>{let e=()=>{let t=!!n&&n.scrollTop+n.clientHeight+10>=n.scrollHeight;ea&&!ea.isFetching&&(ea.isAtEnd?n?.removeEventListener("scroll",e):t&&ea.fetchMore())};return n?.addEventListener("scroll",e),()=>{n?.removeEventListener("scroll",e)}},[ea,n]);let eu=2*(!O&&!K);return(0,w.jsx)(r.Fragment,{children:(0,w.jsx)(d.xu,{display:"flex",height:O||K||0!==ed.length?void 0:"100%",marginTop:O?6:eu,width:"100%",children:(0,w.jsx)(c.Z,{aggregatedPinDataId:F,closeupAttributionId:U,closeupAttributionUsername:H,comments:ed,commentsDisabled:K,isDesktop:O,isReadOnly:e,isVideo:B,openOverflowMenu:h,parentId:F??"",parentType:L.o.pin,pinId:W,pinnerId:$,reactionListCommentId:ec,showingCloseupCommentModule:g,showReactionListForComment:em,storyPinDataId:q,toggleHelpful:(e,t,a)=>()=>{a?M((0,A.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:X})):eo({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:X})},toggleLike:(e,t,a)=>()=>{a?t?et({variables:{userDidItData:e},onCompleted:(a,n)=>{a&&!n&&M((0,A.uL)(e,!t))}}):ee({variables:{userDidItData:e},onCompleted:(a,n)=>{a&&!n&&M((0,A.uL)(e,!t))}}):er({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:X})},toggleReplyComposer:_,userAvatarSize:"sm",viewParameter:p})})})}},301527:function(e,t,a){a.d(t,{o:()=>r,p:()=>s});var n=a(667294),i=a(213491),l=a(785893);let{Provider:o,get:r}=(0,i.Z)("Session");function s({children:e}){let[t,a]=(0,n.useState)(void 0),i=(0,n.useCallback)(()=>a(void 0),[]),r=(0,n.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:a,removeUnauthCommentPinId:i}),[t,i]);return(0,l.jsx)(o,{value:r,children:e})}},409997:function(e,t,a){a.d(t,{ZP:()=>r,hR:()=>s});var n=a(24246),i=a(774838),l=a(858254),o=a(121786);function r(){return s((0,n.Z)())}function s(e){let{countryFromIp:t,isAuthenticated:a,isBot:n}=(0,i.Ts)(),r=function(e){if(e){for(let[t,a]of Object.entries(l.a0))if(a?.COUNTRY_CODES&&a.COUNTRY_CODES.includes(e))return t}}(t||""),s=function(e=l.Wy.TEST,t){let a=(0,o.Z)({law:e,i18n:t}),n=a?.translations?.takedown?.inAppReporting;return n?{board:n?.board,profile:n?.profile,pin:n?.pin,comment:n?.comment}:{}}(r,e),d={lawImplementation:void 0,hasApplicableLawForCountry:!1,inAppReporting:{},createReportLink:()=>""};if(!(!a&&!n)||!r)return d;let c=r?l.a0[r]:void 0,m=c?.ENABLE_UNAUTH_IN_APP_REPORTING??!0;if(r&&m){let e=l.a0[r]?.BASE_FORM_URL||"";return{lawImplementation:r,hasApplicableLawForCountry:!0,inAppReporting:s,createReportLink:t=>{if(!e)return"";let a=new URL(e);return t?.pinId?(a.searchParams.set("pinId",t.pinId),t?.didItId&&a.searchParams.set("did_it_id",t.didItId),t?.commentId&&a.searchParams.set("commentId",t.commentId)):t?.username&&(a.searchParams.set("username",t.username),t?.boardName&&a.searchParams.set("boardName",t.boardName)),a.toString()}}}return d}},426130:function(e,t,a){a.d(t,{Wx:()=>c,uL:()=>s,lg:()=>h,aX:()=>d,YH:()=>u,IU:()=>y,DD:()=>_,Th:()=>f,wH:()=>m,L8:()=>p});var n=a(27399),i=a(681698),l=a(47755),o=a(779686),r=a(438274);function s(e,t){return{type:"USER_DID_IT_DATA_LIKE_TOGGLED",payload:{id:e,liked_by_me:t}}}function d({didItDataId:e,orbacSubjectId:t}){return(0,l.Z)({url:"/v3/did_it/{user_did_it_data}/like/",urlParams:{user_did_it_data:e},method:"POST",data:t?{orbac_subject_id:t}:{}})}function c({didItDataId:e,orbacSubjectId:t}){return(0,l.Z)({url:"/v3/did_it/{user_did_it_data}/like/",urlParams:{user_did_it_data:e},method:"DELETE",data:t?{orbac_subject_id:t}:{}})}function m({didItDataId:e,isLikedByMe:t,orbacSubjectId:a}){return n=>((0,l.Z)({url:"/v3/did_it/{user_did_it_data}/like/",urlParams:{user_did_it_data:e},method:t?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),n(s(e,!t)))}function u({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:a}){return n=>((0,i.Z)({url:`/v3/helpful/2/${e}/`,method:t?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),n({type:"USER_DID_IT_DATA_HELPFUL_TOGGLED",payload:{id:e,marked_helpful_by_me:!t}}))}function g(e){return{type:"USER_DID_IT_DATA_DELETE",payload:{id:e}}}function p(e,t){return{type:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}function _({aggregatedPinDataId:e,details:t,fromUnifiedComment:a,image_signatures:i,pin_id:l,username:s,updateParentDidItCount:d}){let c={aggregatedPinDataId:e,details:t,image_signatures:i,pin_id:l};return t=>n.Z.create("DidItActivityResource",c).callCreate().then(n=>{let i=n.resource_response.data;t({type:"PIN_DID_IT",payload:{id:l,value:!0}}),t({type:"USER_DID_IT_DATA_CREATE",payload:{user_did_it_data:i}}),t((0,o.vX)({feedId:e,feedType:a?r.Z.UNIFIED_COMMENTS:r.Z.TRIED_IT_FEED,itemIds:[i.id],itemType:i.type,prepend:!0})),t((0,o.vX)({feedId:s,feedType:r.Z.TRIED_IT_FEED,itemIds:[i.id],itemType:i.type})),d&&t(p(e,1))},()=>{})}function h({aggregatedPinDataId:e,feedType:t,id:a,isOwnedByMe:i,pinId:l,username:s,updateParentDidItCount:d}){return c=>{n.Z.create("DidItActivityResource",{user_did_it_data_id:a,pinId:l}).callDelete().then(()=>{i&&c({type:"PIN_DID_IT",payload:{id:l,value:!1}}),c(g(a)),c((0,o.EX)({feedId:e??"",feedType:t||r.Z.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"})),c((0,o.EX)({feedId:s,feedType:r.Z.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"})),c((0,o.EX)({feedId:s,feedType:r.Z.UNIFIED_COMMENTS,itemIds:e?[e]:[],itemType:"userdiditdata"})),d&&c(p(a,-1))},()=>{})}}function y({id:e,details:t,image_signatures:a,pinId:i}){let l={details:t,image_signatures:a,user_did_it_data_id:e,pin_id:i};return e=>{n.Z.create("DidItActivityResource",l).callUpdate().then(t=>{e({type:"USER_DID_IT_DATA_UPDATE",payload:{user_did_it_data:t.resource_response.data}})},()=>{})}}function f(e,t,a,n,i){return s=>{(0,l.Z)({url:"/v3/did_it/{user_did_it_data}/flag/",urlParams:{user_did_it_data:a},method:"PUT",data:{reason:n,detailed_reasons:t,explanation:void 0}}).then(()=>{s(g(a)),e&&s((0,o.EX)({feedId:e,feedType:r.Z.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"})),s((0,o.EX)({feedId:i,feedType:r.Z.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"}))},()=>{})}}},578321:function(e,t,a){a.d(t,{R:()=>n});function n(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}},646239:function(e,t,a){a.d(t,{Z:()=>o});var n=a(442279),i=a(438274);let l={},o=(0,n.createSelector)((e,{aggregatedComments:t})=>t,({feeds:e},{aggregatedPinDataId:t})=>e[`${i.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,{users:t})=>t??l,(e,t,a,n)=>{let i=new Set;return t?.map(({id:t,type:o})=>{if(i.has(t))return;i.add(t);let r="aggregatedcomment"===o.toLowerCase()?e[t]:a[t];if(!r)return;let s="user"in r&&("string"==typeof r.user?n[r.user]??l:r.user??l);return{...r,user:s??l}}).filter(e=>void 0!==e)||[]})},333651:function(e){e.exports="https://s.pinimg.com/webapp/commentHelpful-8f64cf79.svg"},773655:function(e){e.exports="https://s.pinimg.com/webapp/commentLoved-493ffc72.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/93059-a34fa58811de5962.mjs.map